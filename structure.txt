1. Luồng nạp dữ liệu (Data Ingestion Pipeline)Đa nguồn (Multi-modal Input): Hệ thống có khả năng xử lý từ PDF (qua OCR Tesseract), hình ảnh, Word, Excel cho đến file văn bản thuần.Xử lý & Cắt nhỏ (Processing & Chunking): Văn bản sau khi làm sạch được chia nhỏ bằng RecursiveCharacterTextSplitter dựa trên số lượng token (sử dụng encoding của OpenAI), đảm bảo mỗi đoạn thông tin vừa đủ để máy hiểu mà không mất ngữ cảnh.Vectơ hóa (Embedding): Mỗi đoạn văn bản được chuyển thành một chuỗi số (vector 384 chiều) bằng mô hình SentenceTransformer.
2. Lưu trữ & Quản lý (Storage)Database kết hợp: Dữ liệu được lưu trữ trong SQLite. Điểm đặc biệt là bạn lưu cả nội dung gốc (txt), vị trí nguồn (loc) và vector đặc trưng (vec) dưới dạng nhị phân (BLOB). Điều này giúp hệ thống có thể truy xuất nhanh chóng mà không cần nạp lại toàn bộ file.
3. Cơ chế Phản hồi (Inference & RAG)Truy vấn Ngữ nghĩa (Semantic Search): Khi người dùng đặt câu hỏi, hệ thống không tìm từ khóa mà tìm ý nghĩa bằng cách so sánh vector câu hỏi với các vector trong DB thông qua thư viện FAISS (tốc độ cực nhanh).Tạo câu trả lời (Augmentation & Generation):Hệ thống lấy ra $k$ đoạn văn bản liên quan nhất làm "nguyên liệu".Toàn bộ "nguyên liệu" này được đóng gói vào một Prompt gửi đến Gemini-1.5-Flash.AI sẽ tổng hợp và trả lời dựa trên thông tin thực tế được cung cấp, giúp giảm thiểu tình trạng "ảo tưởng" (hallucination).
